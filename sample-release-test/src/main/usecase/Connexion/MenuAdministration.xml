<?xml version="1.0" encoding="ISO-8859-1"?>
<release-test name="MenuAdministration"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="http://test-release.xsd">

    <description>Test de droits du menu Administration</description>

    <security-model user="${testEnvironment.user}" roles="utilisateur"/>
    <gui-test>
        <group name="Grisage du menu pour les utilisateurs standards (rôle utilisateur)">
            <assertEnabled menu="Administration" expected="false"/>
            <assertEnabled menu="Administration:Administration utilisateur" expected="false"/>

            <assertEnabled menu="Interfaces" expected="true"/>
            <assertEnabled menu="Interfaces:Paramètres" expected="true"/>

            <assertEnabled menu="Interfaces:Paramètres:Imports" expected="true"/>
            <click menu="Interfaces:Paramètres:Imports"/>
            <assertFrame title="Fichiers / Sections"/>
            <closeFrame title="Fichiers / Sections"/>

            <assertEnabled menu="Interfaces:Paramètres:Système source" expected="true"/>
            <click menu="Interfaces:Paramètres:Système source"/>
            <assertFrame title="Système"/>
            <closeFrame title="Système"/>

            <assertEnabled menu="Interfaces:Paramètres:Export:Sélecteurs génériques" expected="true"/>
            <click menu="Interfaces:Paramètres:Export:Sélecteurs génériques"/>
            <assertFrame title="Sélecteurs génériques"/>
            <closeFrame title="Sélecteurs génériques"/>
            <assertEnabled menu="Interfaces:Paramètres:Export:Fichiers et Sections" expected="true"/>
            <click menu="Interfaces:Paramètres:Export:Fichiers et Sections"/>
            <assertFrame title="Fichiers / Sections"/>
            <closeFrame title="Fichiers / Sections"/>
            <assertEnabled menu="Interfaces:Paramètres:Export:Sections/Colonnes" expected="true"/>
            <click menu="Interfaces:Paramètres:Export:Sections/Colonnes"/>
            <assertFrame title="Sections / Colonnes"/>
            <closeFrame title="Sections / Colonnes"/>

            <assertEnabled menu="Quarantaine:Album" expected="true"/>
            <click menu="Quarantaine:Album"/>
            <assertFrame title="Quarantaine des albums"/>
            <closeFrame title="Quarantaine des albums"/>
        </group>
        <group>
            <sleep duration="5000"/>
        </group>
    </gui-test>

    <security-model user="${testEnvironment.user}" roles="administrateur"/>
    <gui-test>
        <group name="Activation du menu pour les utilisateurs Admin (rôle administrateur)">
            <assertEnabled menu="Administration" expected="true"/>

            <assertEnabled menu="Administration:Administration utilisateur" expected="true"/>
            <click menu="Administration:Administration utilisateur"/>
            <assertFrame title="Administration des utilisateurs"/>
            <closeFrame title="Administration des utilisateurs"/>
        </group>
    </gui-test>
</release-test>
